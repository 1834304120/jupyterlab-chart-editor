{"version":3,"sources":["../../src/components/field.js"],"names":["Field","props","context","_index","traceIndex","_data","data","_fullData","fullData","_property","attr","_fullProperty","updatePlot","bind","_contextUpdate","handleUpdate","nextProps","nextContext","event","value","target","get","newValue","set","gd","contextTypes","array","layout","object","fullLayout","func","number"],"mappings":";;;;;;;;AAAA;;;;AACA;;;;AACA;;;;;;;;;;;;IAEMA,K;;;AACJ,iBAAYC,KAAZ,EAAmBC,OAAnB,EAA4B;AAAA;;AAAA,8GACpBD,KADoB;;AAE1B,UAAKE,MAAL,GAAcD,QAAQE,UAAtB;AACA,UAAKC,KAAL,GAAaH,QAAQI,IAAR,CAAa,MAAKH,MAAlB,CAAb;AACA,UAAKI,SAAL,GAAiBL,QAAQM,QAAR,CAAiB,MAAKL,MAAtB,CAAjB;AACA,UAAKM,SAAL,GAAiB,+BAAe,MAAKJ,KAApB,EAA2B,MAAKJ,KAAL,CAAWS,IAAtC,CAAjB;AACA,UAAKC,aAAL,GAAqB,+BAAe,MAAKJ,SAApB,EAA+B,MAAKN,KAAL,CAAWS,IAA1C,CAArB;AACA,UAAKE,UAAL,GAAkB,MAAKA,UAAL,CAAgBC,IAAhB,OAAlB;AACA,UAAKC,cAAL,GAAsBZ,QAAQa,YAA9B;AAR0B;AAS3B;;;;8CAEyBC,S,EAAWC,W,EAAa;AAChD,WAAKd,MAAL,GAAcc,YAAYb,UAA1B;AACA,WAAKU,cAAL,GAAsBG,YAAYF,YAAlC;AACA,UAAIE,YAAYX,IAAhB,EAAsB;AACpB,aAAKD,KAAL,GAAaY,YAAYX,IAAZ,CAAiB,KAAKH,MAAtB,CAAb;AACD,OAFD,MAEO;AACL,aAAKE,KAAL,GAAa,EAAb;AACD;AACD,UAAIY,YAAYT,QAAhB,EAA0B;AACxB,aAAKD,SAAL,GAAiBU,YAAYT,QAAZ,CAAqB,KAAKL,MAA1B,CAAjB;AACD,OAFD,MAEO;AACL,aAAKI,SAAL,GAAiB,EAAjB;AACD;AACF;;;+BAEUW,K,EAAO;AAChB,WAAKC,KAAL,GAAaD,MAAME,MAAN,CAAaD,KAA1B;AACA,WAAKL,cAAL,IAAuB,KAAKA,cAAL,CAAoB,KAAKb,KAAL,CAAWS,IAA/B,EAAqC,KAAKS,KAA1C,CAAvB;AACD;;;wBAEW;AACV,aAAO,KAAKV,SAAL,CAAeY,GAAf,EAAP;AACD,K;sBAMSC,Q,EAAU;AAClB,WAAKb,SAAL,CAAec,GAAf,CAAmBD,QAAnB;;AAEA,WAAKR,cAAL,CAAoBU,EAApB,EAAwB,KAAKnB,KAA7B,EAAoC,KAAKJ,KAAL,CAAWS,IAA/C,EAAqDY,QAArD;AACD;;;wBARe;AACd,aAAO,KAAKX,aAAL,CAAmBU,GAAnB,EAAP;AACD;;;;;;AASHrB,MAAMyB,YAAN,GAAqB;AACnBnB,QAAM,oBAAUoB,KADG;AAEnBlB,YAAU,oBAAUkB,KAFD;AAGnBC,UAAQ,oBAAUC,MAHC;AAInBC,cAAY,oBAAUD,MAJH;AAKnBb,gBAAc,oBAAUe,IALL;AAMnB1B,cAAY,oBAAU2B;AANH,CAArB;;kBASe/B,K","file":"field.js","sourcesContent":["import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport nestedProperty from \"plotly.js/src/lib/nested_property\";\n\nclass Field extends Component {\n  constructor(props, context) {\n    super(props);\n    this._index = context.traceIndex;\n    this._data = context.data[this._index];\n    this._fullData = context.fullData[this._index];\n    this._property = nestedProperty(this._data, this.props.attr);\n    this._fullProperty = nestedProperty(this._fullData, this.props.attr);\n    this.updatePlot = this.updatePlot.bind(this);\n    this._contextUpdate = context.handleUpdate;\n  }\n\n  componentWillReceiveProps(nextProps, nextContext) {\n    this._index = nextContext.traceIndex;\n    this._contextUpdate = nextContext.handleUpdate;\n    if (nextContext.data) {\n      this._data = nextContext.data[this._index];\n    } else {\n      this._data = [];\n    }\n    if (nextContext.fullData) {\n      this._fullData = nextContext.fullData[this._index];\n    } else {\n      this._fullData = [];\n    }\n  }\n\n  updatePlot(event) {\n    this.value = event.target.value;\n    this._contextUpdate && this._contextUpdate(this.props.attr, this.value);\n  }\n\n  get value() {\n    return this._property.get();\n  }\n\n  get fullValue() {\n    return this._fullProperty.get();\n  }\n\n  set value(newValue) {\n    this._property.set(newValue);\n\n    this._contextUpdate(gd, this._data, this.props.attr, newValue);\n  }\n}\n\nField.contextTypes = {\n  data: PropTypes.array,\n  fullData: PropTypes.array,\n  layout: PropTypes.object,\n  fullLayout: PropTypes.object,\n  handleUpdate: PropTypes.func,\n  traceIndex: PropTypes.number,\n};\n\nexport default Field;\n"]}