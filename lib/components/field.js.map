{"version":3,"sources":["../../src/components/field.js"],"names":["Field","props","context","_index","traceIndex","_data","data","_fullData","fullData","_property","attr","_fullProperty","updatePlot","bind","_contextUpdate","handleUpdate","state","value","fullValue","nextProps","nextContext","event","target","setState","get","newValue","set","gd","contextTypes","array","layout","object","fullLayout","func","number"],"mappings":";;;;;;;;AAAA;;;;AACA;;;;AACA;;;;;;;;;;;;IAEMA,K;;;AACJ,iBAAYC,KAAZ,EAAmBC,OAAnB,EAA4B;AAAA;;AAAA,8GACpBD,KADoB;;AAG1B,UAAKE,MAAL,GAAcD,QAAQE,UAAtB;AACA,UAAKC,KAAL,GAAaH,QAAQI,IAAR,CAAa,MAAKH,MAAlB,CAAb;AACA,UAAKI,SAAL,GAAiBL,QAAQM,QAAR,CAAiB,MAAKL,MAAtB,CAAjB;AACA,UAAKM,SAAL,GAAiB,+BAAe,MAAKJ,KAApB,EAA2B,MAAKJ,KAAL,CAAWS,IAAtC,CAAjB;AACA,UAAKC,aAAL,GAAqB,+BAAe,MAAKJ,SAApB,EAA+B,MAAKN,KAAL,CAAWS,IAA1C,CAArB;AACA,UAAKE,UAAL,GAAkB,MAAKA,UAAL,CAAgBC,IAAhB,OAAlB;AACA,UAAKC,cAAL,GAAsBZ,QAAQa,YAA9B;;AAEA,UAAKC,KAAL,GAAa;AACXC,aAAO,MAAKC;AADD,KAAb;AAX0B;AAc3B;;;;8CAEyBC,S,EAAWC,W,EAAa;AAChD,WAAKjB,MAAL,GAAciB,YAAYhB,UAA1B;AACA,WAAKU,cAAL,GAAsBM,YAAYL,YAAlC;;AAEA,UAAIK,YAAYd,IAAhB,EAAsB;AACpB,aAAKD,KAAL,GAAae,YAAYd,IAAZ,CAAiB,KAAKH,MAAtB,CAAb;AACD,OAFD,MAEO;AACL,aAAKE,KAAL,GAAa,EAAb;AACD;;AAED,UAAIe,YAAYZ,QAAhB,EAA0B;AACxB,aAAKD,SAAL,GAAiBa,YAAYZ,QAAZ,CAAqB,KAAKL,MAA1B,CAAjB;AACD,OAFD,MAEO;AACL,aAAKI,SAAL,GAAiB,EAAjB;AACD;AACF;;;+BAEUc,K,EAAO;AAChB,WAAKJ,KAAL,GAAaI,MAAMC,MAAN,CAAaL,KAA1B;AACA,WAAKM,QAAL,CAAc,EAACN,OAAOI,MAAMC,MAAN,CAAaL,KAArB,EAAd;AACA,WAAKH,cAAL,IAAuB,KAAKA,cAAL,CAAoB,KAAKb,KAAL,CAAWS,IAA/B,EAAqC,KAAKO,KAA1C,CAAvB;AACD;;;wBAEW;AACV,aAAO,KAAKR,SAAL,CAAee,GAAf,EAAP;AACD,K;sBAMSC,Q,EAAU;AAClB,WAAKhB,SAAL,CAAeiB,GAAf,CAAmBD,QAAnB;;AAEA,WAAKX,cAAL,CAAoBa,EAApB,EAAwB,KAAKtB,KAA7B,EAAoC,KAAKJ,KAAL,CAAWS,IAA/C,EAAqDe,QAArD;AACD;;;wBARe;AACd,aAAO,KAAKd,aAAL,CAAmBa,GAAnB,EAAP;AACD;;;;;;AASHxB,MAAM4B,YAAN,GAAqB;AACnBtB,QAAM,oBAAUuB,KADG;AAEnBrB,YAAU,oBAAUqB,KAFD;AAGnBC,UAAQ,oBAAUC,MAHC;AAInBC,cAAY,oBAAUD,MAJH;AAKnBhB,gBAAc,oBAAUkB,IALL;AAMnB7B,cAAY,oBAAU8B;AANH,CAArB;;kBASelC,K","file":"field.js","sourcesContent":["import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport nestedProperty from \"plotly.js/src/lib/nested_property\";\n\nclass Field extends Component {\n  constructor(props, context) {\n    super(props);\n\n    this._index = context.traceIndex;\n    this._data = context.data[this._index];\n    this._fullData = context.fullData[this._index];\n    this._property = nestedProperty(this._data, this.props.attr);\n    this._fullProperty = nestedProperty(this._fullData, this.props.attr);\n    this.updatePlot = this.updatePlot.bind(this);\n    this._contextUpdate = context.handleUpdate;\n\n    this.state = {\n      value: this.fullValue\n    };\n  }\n\n  componentWillReceiveProps(nextProps, nextContext) {\n    this._index = nextContext.traceIndex;\n    this._contextUpdate = nextContext.handleUpdate;\n\n    if (nextContext.data) {\n      this._data = nextContext.data[this._index];\n    } else {\n      this._data = [];\n    }\n\n    if (nextContext.fullData) {\n      this._fullData = nextContext.fullData[this._index];\n    } else {\n      this._fullData = [];\n    }\n  }\n\n  updatePlot(event) {\n    this.value = event.target.value;\n    this.setState({value: event.target.value});\n    this._contextUpdate && this._contextUpdate(this.props.attr, this.value);\n  }\n\n  get value() {\n    return this._property.get();\n  }\n\n  get fullValue() {\n    return this._fullProperty.get();\n  }\n\n  set value(newValue) {\n    this._property.set(newValue);\n\n    this._contextUpdate(gd, this._data, this.props.attr, newValue);\n  }\n}\n\nField.contextTypes = {\n  data: PropTypes.array,\n  fullData: PropTypes.array,\n  layout: PropTypes.object,\n  fullLayout: PropTypes.object,\n  handleUpdate: PropTypes.func,\n  traceIndex: PropTypes.number,\n};\n\nexport default Field;\n"]}