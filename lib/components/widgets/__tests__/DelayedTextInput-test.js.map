{"version":3,"sources":["../../../../src/components/widgets/__tests__/DelayedTextInput-test.js"],"names":["describe","render","value","props","onUpdate","jest","fn","it","expected","component","actual","ref","prop","expect","toEqual","$input","type","enterKey","key","keyCode","which","onEnter","node","not","toBeCalled","simulate","escapeKey","state","setState","mockSelect","target","select","mock","calls","length","toBe","autoSelect"],"mappings":"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","file":"DelayedTextInput-test.js","sourcesContent":["import DelayedTextInput from \"@workspace/components/widgets/DelayedTextInput\";\nimport React from \"react\";\nimport { mount } from \"enzyme\";\n\ndescribe(\"DelayedTextInput\", () => {\n  function render(value, props) {\n    // props.onEnter = props.onEnter || null;\n    props.onUpdate = props.onUpdate || jest.fn();\n\n    return mount(<DelayedTextInput value={value} {...props} />);\n  }\n\n  it(\"renders text\", () => {\n    var expected = \"cool placeholder text\";\n    var component = render(expected, {});\n    var actual = component.ref(\"text\").prop(\"value\");\n    expect(actual).toEqual(expected);\n  });\n\n  describe(\"input type\", () => {\n    it(\"defaults to a text input\", () => {\n      var component = render(\"\", {});\n      var $input = component.ref(\"text\");\n      expect($input.prop(\"type\")).toEqual(\"text\");\n    });\n\n    it(\"renders a password input\", () => {\n      var component = render(\"\", { type: \"password\" });\n      var $input = component.ref(\"text\");\n      expect($input.prop(\"type\")).toEqual(\"password\");\n    });\n  });\n\n  describe(\"when Enter is pressed\", () => {\n    var enterKey = { key: \"Enter\", keyCode: 13, which: 13 };\n\n    it(\"calls the onEnter handler but not onUpdate\", () => {\n      var onUpdate = jest.fn();\n      var onEnter = jest.fn();\n      var component = render(\"test\", { onUpdate, onEnter });\n      var node = component.ref(\"text\");\n      expect(onUpdate).not.toBeCalled();\n      expect(onEnter).not.toBeCalled();\n      node.simulate(\"keyDown\", enterKey);\n      expect(onUpdate).not.toBeCalled();\n      expect(onEnter).toBeCalled();\n    });\n\n    it(\"calls the onUpdate handler if onEnter does not exist\", () => {\n      var onUpdate = jest.fn();\n      var component = render(\"test\", { onUpdate });\n      var node = component.ref(\"text\");\n      expect(onUpdate).not.toBeCalled();\n      node.simulate(\"keyDown\", enterKey);\n      expect(onUpdate).toBeCalled();\n    });\n  });\n\n  describe(\"when escape is pressed\", () => {\n    var escapeKey = { key: \"Escape\", keyCode: 27, which: 27 };\n\n    it(\"reverts the value without calling onUpdate\", () => {\n      var onUpdate = jest.fn();\n      var component = render(\"cheese\", { onUpdate });\n      expect(component.state()).toEqual({ value: \"cheese\" });\n\n      // user types\n      component.setState({ value: \"wine\" });\n      expect(component.state()).toEqual({ value: \"wine\" });\n\n      // user presses escape\n      component.ref(\"text\").simulate(\"keyDown\", escapeKey);\n      expect(component.state()).toEqual({ value: \"cheese\" });\n      expect(onUpdate).not.toBeCalled();\n    });\n  });\n\n  describe(\"on blur\", () => {\n    it(\"calls the onUpdate handler\", () => {\n      var onUpdate = jest.fn();\n      var component = render(\"test\", { onUpdate });\n      expect(onUpdate).not.toBeCalled();\n      component.simulate(\"blur\");\n      expect(onUpdate).toBeCalled();\n    });\n  });\n\n  it(\"highlights text on focus but not subsequent click\", () => {\n    var mockSelect = jest.fn();\n    var component = render(\"test\", {});\n    var node = component.ref(\"text\");\n\n    // first click focuses before the click event\n    node.simulate(\"focus\", { target: { select: mockSelect } });\n    node.simulate(\"click\", { target: { select: mockSelect } });\n    expect(mockSelect.mock.calls.length).toBe(1);\n\n    // click again - no select\n    node.simulate(\"click\", { target: { select: mockSelect } });\n    expect(mockSelect.mock.calls.length).toBe(1);\n  });\n\n  it(\"does not highlight if autoSelect is false\", () => {\n    var mockSelect = jest.fn();\n    var component = render(\"test\", { autoSelect: false });\n    var node = component.ref(\"text\");\n\n    // first click focuses before the click event\n    node.simulate(\"focus\", { target: { select: mockSelect } });\n    node.simulate(\"click\", { target: { select: mockSelect } });\n    expect(mockSelect).not.toBeCalled();\n  });\n});\n"]}