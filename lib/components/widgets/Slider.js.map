{"version":3,"sources":["../../../src/components/widgets/Slider.js"],"names":["orientation","vertical","dimension","clientAxis","zeroPoint","horizontal","Slider","props","state","value","handleChange","bind","positionToValue","getPosition","getValue","moveSlider","startSlider","stopSlider","renderFill","nextProps","setState","onChange","position","sliderSize","refs","sliderBox","positionModifier","Math","round","event","mouseCoordinate","sliderMin","getBoundingClientRect","step","min","max","newValue","newPosition","document","removeEventListener","addEventListener","currentValue","fill","orientationVertical","fillStyles","height","top","width","fillClassName","currentPosition","left","slider__track_horizontal","slider__track_vertical","sliderHandle","propTypes","PropTypes","oneOfType","number","string","func","isRequired","bool","oneOf","defaultProps","module","exports"],"mappings":"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","file":"Slider.js","sourcesContent":["import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { findDOMNode } from \"react-dom\";\nimport classnames from \"classnames\";\nimport { keepWithinMaxMin, getStep } from \"@workspace/utils/number\";\n\n/**\n * Basic slider\n * Accepts min, max, step and orientation parameters\n * Integer values\n */\n\nconst orientation = {\n  vertical: {\n    dimension: \"clientHeight\",\n    clientAxis: \"clientY\",\n    zeroPoint: \"bottom\",\n  },\n  horizontal: {\n    dimension: \"clientWidth\",\n    clientAxis: \"clientX\",\n    zeroPoint: \"left\",\n  },\n};\n\nclass Slider extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { value: props.value };\n    this.handleChange = this.handleChange.bind(this);\n    this.positionToValue = this.positionToValue.bind(this);\n    this.getPosition = this.getPosition.bind(this);\n    this.getValue = this.getValue.bind(this);\n    this.moveSlider = this.moveSlider.bind(this);\n    this.startSlider = this.startSlider.bind(this);\n    this.stopSlider = this.stopSlider.bind(this);\n    this.renderFill = this.renderFill.bind(this);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    // Updates the value to the graph's actual value\n    if (nextProps.value !== this.state.value) {\n      this.setState({\n        value: nextProps.value,\n      });\n    }\n  }\n\n  handleChange(value) {\n    this.setState({ value });\n    this.props.onChange(value);\n  }\n\n  positionToValue(position) {\n    const dimension = orientation[this.props.orientation].dimension;\n    const sliderSize = findDOMNode(this.refs.sliderBox)[dimension];\n    const positionModifier = 100 / sliderSize;\n\n    return Math.round(position * positionModifier);\n  }\n\n  getPosition(event) {\n    const sliderBox = findDOMNode(this.refs.sliderBox);\n    const zeroPoint = orientation[this.props.orientation].zeroPoint;\n    const mouseCoordinate =\n      event[orientation[this.props.orientation].clientAxis];\n    const sliderMin = sliderBox.getBoundingClientRect()[zeroPoint];\n\n    let position;\n    if (this.props.orientation === \"vertical\") {\n      position = sliderMin - mouseCoordinate;\n    } else {\n      position = mouseCoordinate - sliderMin;\n    }\n\n    return position;\n  }\n\n  getValue(position) {\n    const { step, min, max } = this.props;\n    let newValue = this.positionToValue(position);\n    newValue = getStep(newValue, step);\n    newValue = keepWithinMaxMin(newValue, min, max);\n\n    return newValue;\n  }\n\n  moveSlider(event) {\n    const newPosition = this.getPosition(event);\n    const newValue = this.getValue(newPosition);\n    this.handleChange(newValue);\n  }\n\n  stopSlider() {\n    document.removeEventListener(\"mousemove\", this.moveSlider);\n    document.removeEventListener(\"mouseup\", this.stopSlider);\n  }\n\n  startSlider() {\n    document.addEventListener(\"mousemove\", this.moveSlider);\n    document.addEventListener(\"mouseup\", this.stopSlider);\n  }\n\n  renderFill() {\n    const currentValue = this.state.value;\n    if (this.props.fill === true) {\n      const orientationVertical = this.props.orientation === \"vertical\";\n\n      let fillStyles;\n      if (orientationVertical) {\n        fillStyles = {\n          height: currentValue + \"%\",\n          top: 100 - currentValue + \"%\",\n        };\n      } else {\n        fillStyles = {\n          width: currentValue + \"%\",\n        };\n      }\n\n      const fillClassName = classnames(\"slider__fill\", {\n        \"slider__fill--horizontal\": !orientationVertical,\n        \"slider__fill--vertical\": orientationVertical,\n      });\n\n      return <div style={fillStyles} className={fillClassName} />;\n    }\n\n    return null;\n  }\n\n  render() {\n    const orientationVertical = this.props.orientation === \"vertical\";\n    const currentValue = this.state.value;\n\n    let currentPosition;\n\n    if (orientationVertical) {\n      currentPosition = {\n        top: 100 - currentValue + \"%\",\n      };\n    } else {\n      currentPosition = {\n        left: currentValue + \"%\",\n      };\n    }\n\n    const sliderBox = classnames(\"slider__track\", {\n      slider__track_horizontal: !orientationVertical,\n      slider__track_vertical: orientationVertical,\n    });\n\n    const sliderHandle = classnames(\"slider__handle\", {\n      \"slider__handle--horizontal\": !orientationVertical,\n      \"slider__handle--vertical\": orientationVertical,\n    });\n\n    return (\n      <div className={sliderBox} ref=\"sliderBox\" onMouseDown={this.moveSlider}>\n        {this.renderFill()}\n        <div\n          className={sliderHandle}\n          style={currentPosition}\n          onMouseDown={this.startSlider}\n          onMouseUp={this.stopSlider}\n        />\n      </div>\n    );\n  }\n}\n\nSlider.propTypes = {\n  value: React.PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  onChange: PropTypes.func.isRequired,\n  min: PropTypes.number,\n  max: PropTypes.number,\n  step: PropTypes.number,\n  fill: PropTypes.bool,\n  orientation: PropTypes.oneOf([\"horizontal\", \"vertical\"]),\n};\n\nSlider.defaultProps = {\n  value: 50,\n  min: 0,\n  max: 100,\n  step: 1,\n  orientation: \"horizontal\",\n  fill: true,\n};\n\nmodule.exports = Slider;\n"]}