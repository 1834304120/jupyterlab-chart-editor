{"version":3,"sources":["../../src/components/PanelMenuWrapper.js"],"names":["PanelsWithModeMenu","props","opts","computeMenuOptions","state","section","name","panel","panels","setPanel","bind","renderSection","setState","i","obj","child","children","sectionLookup","sectionIndex","sections","length","hasOwnProperty","push","menuOpts","map","key","visible"],"mappings":";;;;;;;;AAAA;;;;AACA;;;;AACA;;AACA;;;;;;;;;;;;IAEMA,kB;;;AACJ,8BAAYC,KAAZ,EAAmB;AAAA;;AAAA,wIACXA,KADW;;AAGjB,QAAIC,OAAO,MAAKC,kBAAL,CAAwBF,KAAxB,CAAX;;AAEA,UAAKG,KAAL,GAAa;AACXC,eAASH,KAAK,CAAL,EAAQI,IADN;AAEXC,aAAOL,KAAK,CAAL,EAAQM,MAAR,CAAe,CAAf;AAFI,KAAb;;AAKA,UAAKC,QAAL,GAAgB,MAAKA,QAAL,CAAcC,IAAd,OAAhB;AACA,UAAKC,aAAL,GAAqB,MAAKA,aAAL,CAAmBD,IAAnB,OAArB;AAXiB;AAYlB;;;;6BAEQL,O,EAASE,K,EAAO;AACvB,WAAKK,QAAL,CAAc,EAAEP,gBAAF,EAAWE,YAAX,EAAd;AACD;;;kCAEaF,O,EAASQ,C,EAAG;AACxB,aACE;AACE,aAAKA,CADP;AAEE,yBAAiB,KAAKT,KAAL,CAAWC,OAF9B;AAGE,uBAAe,KAAKD,KAAL,CAAWG,KAH5B;AAIE,iBAASF,QAAQC,IAJnB;AAKE,gBAAQD,QAAQG,MALlB;AAME,yBAAiB,KAAKC;AANxB,QADF;AAUD;;;uCAEkBR,K,EAAO;AACxB,UAAIa,GAAJ,EAASC,KAAT,EAAgBV,OAAhB,EAAyBC,IAAzB;AACA,UAAIU,WAAWf,MAAMe,QAArB;AACA,UAAIC,gBAAgB,EAApB;AACA,UAAIC,YAAJ;AACA,UAAIC,WAAW,EAAf;AACA,WAAK,IAAIN,IAAI,CAAb,EAAgBA,IAAIG,SAASI,MAA7B,EAAqCP,GAArC,EAA0C;AACxCE,gBAAQC,SAASH,CAAT,CAAR;AACAR,kBAAUU,MAAMd,KAAN,CAAYI,OAAtB;AACAC,eAAOS,MAAMd,KAAN,CAAYK,IAAnB;;AAEA,YAAIW,cAAcI,cAAd,CAA6BhB,OAA7B,CAAJ,EAA2C;AACzCa,yBAAeD,cAAcZ,OAAd,CAAf;AACAS,gBAAMK,SAASD,YAAT,CAAN;AACD,SAHD,MAGO;AACLD,wBAAcZ,OAAd,IAAyBc,SAASC,MAAlC;AACAN,gBAAM,EAAER,MAAMD,OAAR,EAAiBG,QAAQ,EAAzB,EAAN;AACAW,mBAASG,IAAT,CAAcR,GAAd;AACD;;AAEDA,YAAIN,MAAJ,CAAWc,IAAX,CAAgBhB,IAAhB;AACD;;AAED,aAAOa,QAAP;AACD;;;6BAEQ;AAAA;;AACP,UAAII,WAAW,KAAKpB,kBAAL,CAAwB,KAAKF,KAA7B,CAAf;;AAEA,aACE;AAAA;AAAA;AACE;AAAA;AAAA,YAAK,WAAW,cAAI,WAAJ,CAAhB;AACGsB,mBAASC,GAAT,CAAa,KAAKb,aAAlB;AADH,SADF;AAKG,aAAKV,KAAL,CAAWe,QAAX,CAAoBQ,GAApB,CAAwB,UAACT,KAAD,EAAQF,CAAR;AAAA,iBACvB,yBAAaE,KAAb,EAAoB;AAClBU,iBAAKZ,CADa;AAElBa,qBACE,OAAKtB,KAAL,CAAWC,OAAX,KAAuBU,MAAMd,KAAN,CAAYI,OAAnC,IACA,OAAKD,KAAL,CAAWG,KAAX,KAAqBQ,MAAMd,KAAN,CAAYK;AAJjB,WAApB,CADuB;AAAA,SAAxB;AALH,OADF;AAgBD;;;;;;kBAGY,mBAASN,kBAAT,C","file":"PanelMenuWrapper.js","sourcesContent":["import React, { cloneElement, Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { bem, localize } from \"../lib\";\nimport ModeMenuSection from \"./ModeMenuSection\";\n\nclass PanelsWithModeMenu extends Component {\n  constructor(props) {\n    super(props);\n\n    var opts = this.computeMenuOptions(props);\n\n    this.state = {\n      section: opts[0].name,\n      panel: opts[0].panels[0],\n    };\n\n    this.setPanel = this.setPanel.bind(this);\n    this.renderSection = this.renderSection.bind(this);\n  }\n\n  setPanel(section, panel) {\n    this.setState({ section, panel });\n  }\n\n  renderSection(section, i) {\n    return (\n      <ModeMenuSection\n        key={i}\n        selectedSection={this.state.section}\n        selectedPanel={this.state.panel}\n        section={section.name}\n        panels={section.panels}\n        onChangeSection={this.setPanel}\n      />\n    );\n  }\n\n  computeMenuOptions(props) {\n    var obj, child, section, name;\n    var children = props.children;\n    var sectionLookup = {};\n    var sectionIndex;\n    var sections = [];\n    for (var i = 0; i < children.length; i++) {\n      child = children[i];\n      section = child.props.section;\n      name = child.props.name;\n\n      if (sectionLookup.hasOwnProperty(section)) {\n        sectionIndex = sectionLookup[section];\n        obj = sections[sectionIndex];\n      } else {\n        sectionLookup[section] = sections.length;\n        obj = { name: section, panels: [] };\n        sections.push(obj);\n      }\n\n      obj.panels.push(name);\n    }\n\n    return sections;\n  }\n\n  render() {\n    var menuOpts = this.computeMenuOptions(this.props);\n\n    return (\n      <div>\n        <div className={bem(\"mode-menu\")}>\n          {menuOpts.map(this.renderSection)}\n        </div>\n\n        {this.props.children.map((child, i) =>\n          cloneElement(child, {\n            key: i,\n            visible:\n              this.state.section === child.props.section &&\n              this.state.panel === child.props.name,\n          })\n        )}\n      </div>\n    );\n  }\n}\n\nexport default localize(PanelsWithModeMenu);\n"]}